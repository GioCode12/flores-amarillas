:root{
  --bg1:#1b1bff; --bg2:#7a37ff; --bg3:#ff6ec7;
  --glass:rgba(255,255,255,.12);
  --card:rgba(255,255,255,.18);
  --stroke:#90ff64; --accent:#9dff00; --text:#f8fff2;
}

*{ box-sizing:border-box }
html,body{ height:100% }

body{
  margin:0;
  font-family:'Inclusive Sans', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  color:var(--text);
  background:linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3));
  background-size:200% 200%;
  animation:bgShift 20s ease infinite;
  min-height:100vh;
  -webkit-text-size-adjust:100%;
  overflow-x:hidden;
}

@keyframes bgShift{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.wrap{ min-height:100vh; display:grid; grid-template-rows:1fr auto; }

.stage{
  position:relative;
  width:min(92vw,1100px);
  margin:16px auto;
  border-radius:24px;
  background:var(--glass);
  -webkit-backdrop-filter:blur(10px);
  backdrop-filter:blur(10px);
  box-shadow:0 10px 30px rgba(0,0,0,.18);
  padding:16px 16px 120px; /* espacio para panel sticky */
}

/* Canvas responsive: altura estable en móvil */
#Flor{
  display:block;
  width:100%;
  height:clamp(300px, 48vh, 560px);     /* fallback */
  border-radius:16px;
  min-height:300px;                      /* nunca 0px */
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  touch-action:manipulation;
}
@supports (height: 1svh){
  #Flor{ height:clamp(300px, 48svh, 560px); } /* estable con barras UI móviles */
}

/* Tipografías fluidas */
.title{
  text-align:center;
  margin:10px 0 0;
  font-size:clamp(28px, 8vw, 72px);
  line-height:1.1;
}
.subtitle{
  text-align:center;
  margin:18px 0 14px;
  font-size:clamp(16px, 4.8vw, 34px);
  line-height:1.25;
}

/* Mensaje */
.love{
  margin:14px 6px 0;
  text-align:center;
  font-size:clamp(16px, 5.2vw, 32px);
  display:none;
}

/* Panel sticky, respetando notch/home bar */
.panel{
  position:sticky;
  bottom:calc(max(12px, env(safe-area-inset-bottom))); /* notch / barra gesto */
  z-index:5;
  display:flex;
  justify-content:center;
  width:100%;
  margin-top:16px;
}
.panel-inner{
  display:flex; align-items:center; gap:12px;
  background:var(--card);
  padding:10px 14px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.14);
}
.btn{
  border:2px solid var(--stroke);
  background:#c7ffa1;
  padding:12px 18px;
  border-radius:14px;
  cursor:pointer;
  font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size:clamp(16px, 4.2vw, 20px);
  transition:.2s;
}
.btn:hover{ background:#fff; transform:translateY(-1px); }

.vol{ display:flex; align-items:center; gap:8px; }
.vol input[type="range"]{ width:min(48vw,340px); height:32px; }

/* Móvil: más colchón para que el panel no tape el ramo */
@media (max-width:480px){
  .stage{ padding-bottom:max(140px, calc(110px + env(safe-area-inset-bottom))); }
  .vol input[type="range"]{ width:62vw; }
}

/* Desktop grande */
@media (min-width:1024px){
  #Flor{ height:clamp(420px, 52vh, 620px); }
  .stage{ padding:20px 20px 120px; }
}
